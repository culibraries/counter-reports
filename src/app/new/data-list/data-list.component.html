<table mat-table [dataSource]="dataSource" multiTemplateDataRows matSort matSortActive="total" matSortDirection="desc">
  <ng-container matColumnDef="title">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Journal Title </th>
    <td mat-cell *matCellDef="let element" style="width: 350px;">
      {{element.title}} </td>
  </ng-container>
  <ng-container matColumnDef="publisher">
    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 150px;">
      Publisher </th>
    <td mat-cell *matCellDef="let element"> {{element.publisher}} </td>
  </ng-container>
  <ng-container matColumnDef="platform">
    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 150px;">
      Platform </th>
    <td mat-cell *matCellDef="let element"> {{element.platform}} </td>
  </ng-container>
  <ng-container matColumnDef="print_issn">
    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 85px;">
      Print ISSN </th>
    <td mat-cell *matCellDef="let element"> {{element.print_issn}} </td>
  </ng-container>
  <ng-container matColumnDef="online_issn">
    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 85px;">
      Online ISSN </th>
    <td mat-cell *matCellDef="let element"> {{element.online_issn}} </td>
  </ng-container>
  <ng-container matColumnDef="isbn">
    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 40px;">
      ISBN </th>
    <td mat-cell *matCellDef="let element"><strong> {{element.isbn}}</strong></td>
  </ng-container>
  <ng-container matColumnDef="yop">
    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 40px;">
      YOP </th>
    <td mat-cell *matCellDef="let element"><strong> {{element.yop}}</strong></td>
  </ng-container>
  <ng-container matColumnDef="effective_dates">
    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 135px;">
      Reporting Period</th>
    <td mat-cell *matCellDef="let element"> {{element.effective_dates}} </td>
  </ng-container>
  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 40px;">
      Status</th>
    <td mat-cell *matCellDef="let element" style="text-align: center;"> {{element.status}} </td>
  </ng-container>
  <ng-container matColumnDef="total">
    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 40px;">
      Total Requests </th>
    <td mat-cell *matCellDef="let element"><strong> {{element.total}} </strong></td>
  </ng-container>
  <ng-container matColumnDef="expandedDetail">
    <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">
      <div class="element-detail" [@detailExpand]="element == expandedElement ?
        'expanded' : 'collapsed'" style="padding-top: 20px">
        <table style="border: 1px solid gray; width: auto; margin-right: 5px;" cellspacing=1 cellpadding=5>
          <tr>
            <td style="border-bottom: 1px solid gray;text-align: center;"><strong>Details</strong></td>
          </tr>
          <tr>
            <td>

              <p>ISBN: <strong>{{element.doi}} </strong></p>
              <p>Type: <strong>{{element.title_type}}</strong></p>
              <p>DOI: <strong>{{element.doi}}</strong></p>
              <p>Proprietary ID: <strong>{{element.proprietary_id}}</strong></p>
              <p>URI: <strong>{{element.uri}}</strong></p>
            </td>

          </tr>
        </table>

        <table cellspacing=1 cellpadding=5 style="border: 1px solid gray; width: auto; margin-right: 5px;"
          *ngIf="element.MonthsTotalItemRequests.length > 0">
          <tr>
            <td style="border-right:1px solid gray; border-bottom:1px solid gray;"><strong>Peroid</strong></td>
            <td style="border-bottom:1px solid gray;"><strong>Total Item Requests</strong></td>
          </tr>
          <tr *ngFor=" let month of element.MonthsTotalItemRequests">
            <td style="border-bottom: 1px solid gray; border-right:1px solid gray ;">{{ month.month | monthConvert}}
            </td>
            <td style="text-align: center;border-bottom: 1px solid gray;">{{month.total}}</td>
          </tr>
        </table>

        <table cellspacing=1 cellpadding=5 style="border: 1px solid gray; width: auto;"
          *ngIf="element.MonthsUniqueItemRequests.length > 0">
          <tr>
            <td style="border-right:1px solid gray; border-bottom:1px solid gray;"><strong>Peroid</strong></td>
            <td style="border-bottom:1px solid gray;"><strong>Unique_Item_Requests</strong></td>
          </tr>
          <tr *ngFor="let month of element.MonthsUniqueItemRequests">
            <td style="border-bottom: 1px solid gray; border-right:1px solid gray ;">{{ month.month | monthConvert}}
            </td>
            <td style="text-align: center;border-bottom: 1px solid gray;">{{month.total}}</td>
          </tr>
        </table>



      </div>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let element; columns: displayedColumns;" class="element-row"
    [class.expanded-row]="expandedElement === element"
    (click)="expandedElement= expandedElement === element ? null : element">
  </tr>
  <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
</table>

<div class="pagination">
  <mat-paginator style="float: left" [length]="100" [pageSize]="30" [pageSizeOptions]="[5, 10, 25, 100]">
  </mat-paginator>
  <mat-form-field style="width: 400px; float: left">
    <input style="outline: 0" matInput (keyup)="searchFilter($event.target.value)" placeholder="Search...">
  </mat-form-field>
  <!-- <button class="export-button" mat-stroked-button (click)="export()" [disabled]="disabledExportButton">Export</button> -->
</div>